<!doctype html>
<html lang="zh-CN">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
<title>OK42 3D AR Viewer</title>

<script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>

<style>
*{margin:0;padding:0;box-sizing:border-box}
html,body{width:100%;height:100vh;overflow:hidden;background:#f5f5f5}

/* 顶部条 */
.top-bar{
  position:fixed;top:0;left:0;width:100%;
  background:linear-gradient(135deg,rgba(102,126,234,.5),rgba(118,75,162,.5));
  backdrop-filter:blur(10px);
  color:#fff;padding:12px;
  display:flex;justify-content:center;align-items:center;
  z-index:1000;font-size:20px;font-weight:bold;
}
.home-btn{
  position:absolute;left:15px;
  width:42px;height:42px;border-radius:50%;
  border:2px solid #00ffff;color:#00ffff;
  display:flex;align-items:center;justify-content:center;
  text-decoration:none;
  box-shadow:0 0 15px rgba(0,255,255,.6);
}

/* 底部条 */
.bottom-bar{
  position:fixed;bottom:0;left:0;width:100%;
  background:linear-gradient(135deg,rgba(102,126,234,.5),rgba(118,75,162,.5));
  backdrop-filter:blur(10px);
  color:#fff;padding:12px;text-align:center;
  z-index:1000;font-size:14px;
}

/* model-viewer */
model-viewer{
  width:100%;height:100vh;display:block;
}

/* AR按钮 */
#ar-button-wrapper{
  position:fixed;
  right:20px;
  bottom:105px;
  width:75px;height:75px;
  z-index:9999;
}
#ar-button-glow{
  position:absolute;inset:0;border-radius:16px;
  animation:breathe 2.2s infinite;
  box-shadow:0 0 20px rgba(102,126,234,.9),
             0 0 40px rgba(102,126,234,.7);
}
#ar-button{
  position:absolute;top:50%;left:50%;
  width:70px;height:70px;
  transform:translate(-50%,-50%);
  background:url("poster/AR200logo.png") no-repeat center/contain;
  cursor:pointer;
}
@keyframes breathe{
  0%{transform:scale(1);opacity:.6}
  50%{transform:scale(1.35);opacity:1}
  100%{transform:scale(1);opacity:.6}
}

/* 加载层 */
.loading{
  position:fixed;inset:0;
  background:#000;
  display:flex;flex-direction:column;
  align-items:center;justify-content:center;
  z-index:2000;color:#fff;
}
.loading.hide{opacity:0;pointer-events:none}
.bar{width:300px;height:6px;background:#333;margin-top:20px}
.fill{height:100%;width:0;background:linear-gradient(90deg,#667eea,#764ba2)}
</style>
</head>

<body>

<div class="loading" id="loading">
  <div>Loading 3D Model</div>
  <div class="bar"><div class="fill" id="fill"></div></div>
</div>

<div class="top-bar">
  <a href="/" class="home-btn">42</a>
  360° Interactive View
</div>

<model-viewer
  id="viewer"
  src="models/2014.glb"
  ios-src="models/2014.usdz"
  poster="poster/123.jpg.webp"
  ar
  ar-modes="scene-viewer webxr quick-look"
  camera-controls
  auto-rotate
  environment-image="neutral"
  shadow-intensity="1"
  camera-orbit="0deg 90deg 80%"
  field-of-view="30deg">
</model-viewer>

<div id="ar-button-wrapper">
  <div id="ar-button-glow"></div>
  <div id="ar-button"></div>
</div>

<div class="bottom-bar">
  Drag to rotate · Pinch to zoom · Tap AR
</div>

<script>
const mv=document.getElementById('viewer');
const loading=document.getElementById('loading');
const fill=document.getElementById('fill');
const arBtn=document.getElementById('ar-button');

arBtn.onclick=()=>mv.activateAR&&mv.activateAR();

mv.addEventListener('progress',e=>{
  fill.style.width=(e.detail.totalProgress*100)+'%';
});
mv.addEventListener('load',()=>{
  setTimeout(()=>loading.classList.add('hide'),500);
});
</script>

</body>
</html>

